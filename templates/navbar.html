<nav id="navbar" class="fixed top-0 left-0 w-full bg-black/95 backdrop-blur-md border-b border-gray-800 z-50 navbar-show">
    <div class="max-w-7xl mx-auto px-6 lg:px-8">
      <div class="flex items-center justify-between h-20">
        <div class="flex items-center">
          <h1 class="text-2xl font-black text-white tracking-tight">
            <span class="text-gradient">ADIDOS</span>
          </h1>
        </div>
        
        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-center space-x-12">
          <a href="/" class="text-gray-300 hover:text-white font-medium transition-all duration-300 relative group">
            Home
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"></span>
          </a>
          <a href="{% url 'main:create_product' %}" class="text-gray-300 hover:text-white font-medium transition-all duration-300 relative group">
            Create Product
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"></span>
          </a>
        </div>
        
        <!-- Desktop User Section -->
        <div class="hidden md:flex items-center space-x-6">
          {% if user.is_authenticated %}
            <div class="text-right">
              <div class="text-sm font-semibold text-white">{{ user.username }}</div>
            </div>
            <!-- UBAH LOGOUT LINK JADI BUTTON AJAX -->
            <button onclick="logoutUser()" class="bg-white text-black hover:bg-gray-200 px-6 py-2 rounded-full font-semibold transition-all duration-300 transform hover:scale-105">
              Logout
            </button>
          {% else %}
            <a href="{% url 'main:login' %}" class="text-gray-300 hover:text-white font-medium transition-colors">
              Login
            </a>
            <a href="{% url 'main:register' %}" class="bg-white text-black hover:bg-gray-200 px-6 py-2 rounded-full font-semibold transition-all duration-300 transform hover:scale-105">
              Register
            </a>
          {% endif %}
        </div>
        
        <!-- Mobile Menu Button -->
        <div class="md:hidden flex items-center">
          <button class="mobile-menu-button p-2 text-gray-300 hover:text-white transition-colors">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Mobile Menu -->
    <div class="mobile-menu hidden md:hidden bg-black/98 border-t border-gray-800">
      <div class="px-6 py-6 space-y-4">
        <div class="space-y-4">
          <a href="/" class="block text-gray-300 hover:text-white font-medium py-3 transition-colors">
            Home
          </a>
          <a href="{% url 'main:create_product' %}" class="block text-gray-300 hover:text-white font-medium py-3 transition-colors">
            Create Product
          </a>
        </div>
        
        <div class="border-t border-gray-800 pt-4">
          {% if user.is_authenticated %}
            <div class="mb-4">
              <div class="font-semibold text-white">{{ user.username }}</div>
            </div>
            <!-- UBAH LOGOUT LINK MOBILE JADI BUTTON AJAX -->
            <button onclick="logoutUser()" class="w-full bg-white text-black text-center font-semibold py-3 px-4 rounded-full transition-colors hover:bg-gray-200">
              Logout
            </button>
          {% else %}
            <div class="space-y-3">
              <a href="{% url 'main:login' %}" class="block text-gray-300 hover:text-white font-medium py-3 transition-colors">
                Login
              </a>
              <a href="{% url 'main:register' %}" class="block bg-white text-black text-center font-semibold py-3 px-4 rounded-full transition-colors">
                Register
              </a>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
    
    <script>
      // Mobile menu toggle
      const btn = document.querySelector("button.mobile-menu-button");
      const menu = document.querySelector(".mobile-menu");
    
      btn.addEventListener("click", () => {
        menu.classList.toggle("hidden");
      });

      // AJAX Logout Function
      async function logoutUser() {
        try {
          const response = await fetch("{% url 'main:logout' %}", {
            method: 'POST',
            headers: {
              'X-CSRFToken': getCookie('csrftoken'),
              'Content-Type': 'application/x-www-form-urlencoded',
            },
          });

          if (response.ok) {
            // Show success toast
            showToast("Successfully logged out! See you again soon.", "success");
            
            // Redirect after toast is shown
            setTimeout(() => {
              window.location.href = "{% url 'main:login' %}";
            }, 2000);
          } else {
            showToast("Logout failed. Please try again.", "error");
          }
        } catch (error) {
          console.error('Logout error:', error);
          showToast("An error occurred during logout.", "error");
        }
      }

      // Get CSRF token from cookies
      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
              cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
              break;
            }
          }
        }
        return cookieValue;
      }

      // Toast function (check if not already defined)
      if (typeof showToast === 'undefined') {
        function showToast(message, type = 'success') {
          // Remove existing toasts
          const existingToasts = document.querySelectorAll('.toast');
          existingToasts.forEach(toast => toast.remove());
          
          const toast = document.createElement('div');
          const bgColor = type === 'success' ? 'bg-green-600' : 'bg-red-600';
          const icon = type === 'success' ? 'fas fa-check-circle' : 'fas fa-exclamation-circle';
          
          toast.className = `toast fixed top-4 right-4 px-6 py-3 rounded-lg text-white transform translate-x-full transition-all duration-300 ${bgColor} flex items-center shadow-lg z-50`;
          toast.innerHTML = `<i class="${icon} mr-2"></i>${message}`;
          
          document.body.appendChild(toast);
          
          // Animate in
          setTimeout(() => toast.style.transform = 'translateX(0)', 100);
          
          // Animate out and remove
          setTimeout(() => {
            toast.style.transform = 'translateX(100%)';
            setTimeout(() => toast.remove(), 300);
          }, 3000);
        }
      }
    </script>
</nav>